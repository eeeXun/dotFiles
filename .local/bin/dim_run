#!/bin/bash

## CONFIGURATION ##############################################################

# Brightness will be lowered to this value.
min_brightness=1

###############################################################################

get_brightness() {
    xbacklight -get
}

set_brightness() {
    xbacklight -steps 1 -set $1
}

fade_brightness() {
    set_brightness $1
}

trap "exit 0" TERM INT
trap "set_brightness $(get_brightness); kill %%" EXIT
fade_brightness $min_brightness
sleep 2147483647 &
wait
